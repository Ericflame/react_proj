{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\PC\\\\Desktop\\\\react-project\\\\src\\\\containers\\\\Product\\\\rich-text-editor.jsx\";\nimport React, { Component } from 'react'; // import PropTypes from 'prop-types'\n\nimport { Editor } from 'react-draft-wysiwyg';\nimport { ContentState, convertToRaw, EditorState } from 'draft-js';\nimport 'react-draft-wysiwyg/dist/react-draft-wysiwyg.css';\nimport draftToHtml from 'draftjs-to-html';\nimport htmlToDraft from 'html-to-draftjs'; // 用来指定商品详情的富文本编程器组件\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class RichTextEditor extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      // 创建一个没有内容的编辑对象\n      editorState: EditorState.createEmpty() //构建一个初始化状态的编辑器+内容\n\n    };\n\n    this.onEditorStateChange = editorState => {\n      this.setState({\n        editorState\n      });\n    };\n\n    this.getRichText = () => {\n      const {\n        editorState\n      } = this.state; // 返回输入数据对应的html格式的文本\n\n      return draftToHtml(convertToRaw(editorState.getCurrentContent()));\n    };\n\n    this.setRichText = html => {\n      const contentBlock = htmlToDraft(html);\n\n      if (contentBlock) {\n        const contentState = ContentState.createFromBlockArray(contentBlock.contentBlocks);\n        const editorState = EditorState.createWithContent(contentState);\n        this.setState({\n          editorState\n        });\n      }\n    };\n  }\n\n  render() {\n    const {\n      editorState\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(Editor, {\n      editorState: editorState,\n      editorStyle: {\n        border: '1px solid #ddd',\n        minHeight: 200,\n        paddingLeft: 10\n      },\n      onEditorStateChange: this.onEditorStateChange,\n      toolbar: {\n        image: {\n          uploadCallback: this.uploadImageCallback,\n          alt: {\n            present: true,\n            mandatory: true\n          }\n        }\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 7\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["C:/Users/PC/Desktop/react-project/src/containers/Product/rich-text-editor.jsx"],"names":["React","Component","Editor","ContentState","convertToRaw","EditorState","draftToHtml","htmlToDraft","RichTextEditor","state","editorState","createEmpty","onEditorStateChange","setState","getRichText","getCurrentContent","setRichText","html","contentBlock","contentState","createFromBlockArray","contentBlocks","createWithContent","render","border","minHeight","paddingLeft","image","uploadCallback","uploadImageCallback","alt","present","mandatory"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC,C,CACA;;AACA,SAASC,MAAT,QAAuB,qBAAvB;AACA,SAASC,YAAT,EAAuBC,YAAvB,EAAqCC,WAArC,QAAwD,UAAxD;AACA,OAAO,kDAAP;AACA,OAAOC,WAAP,MAAwB,iBAAxB;AACA,OAAOC,WAAP,MAAwB,iBAAxB,C,CAEA;;;AACA,eAAe,MAAMC,cAAN,SAA6BP,SAA7B,CAAuC;AAAA;AAAA;AAAA,SAKpDQ,KALoD,GAK5C;AACN;AACAC,MAAAA,WAAW,EAAEL,WAAW,CAACM,WAAZ,EAFP,CAEgC;;AAFhC,KAL4C;;AAAA,SAUpDC,mBAVoD,GAU7BF,WAAD,IAAiB;AACrC,WAAKG,QAAL,CAAc;AAAEH,QAAAA;AAAF,OAAd;AACD,KAZmD;;AAAA,SAapDI,WAboD,GAatC,MAAM;AAClB,YAAM;AAACJ,QAAAA;AAAD,UAAgB,KAAKD,KAA3B,CADkB,CAElB;;AACA,aAAOH,WAAW,CAACF,YAAY,CAACM,WAAW,CAACK,iBAAZ,EAAD,CAAb,CAAlB;AACD,KAjBmD;;AAAA,SAkBpDC,WAlBoD,GAkBrCC,IAAD,IAAQ;AACpB,YAAMC,YAAY,GAAGX,WAAW,CAACU,IAAD,CAAhC;;AACA,UAAIC,YAAJ,EAAkB;AAChB,cAAMC,YAAY,GAAGhB,YAAY,CAACiB,oBAAb,CAAkCF,YAAY,CAACG,aAA/C,CAArB;AACA,cAAMX,WAAW,GAAGL,WAAW,CAACiB,iBAAZ,CAA8BH,YAA9B,CAApB;AACA,aAAKN,QAAL,CAAc;AACZH,UAAAA;AADY,SAAd;AAGD;AACF,KA3BmD;AAAA;;AA6BpDa,EAAAA,MAAM,GAAG;AACP,UAAM;AAAEb,MAAAA;AAAF,QAAkB,KAAKD,KAA7B;AACA,wBACE,QAAC,MAAD;AACE,MAAA,WAAW,EAAEC,WADf;AAEE,MAAA,WAAW,EAAE;AAAEc,QAAAA,MAAM,EAAE,gBAAV;AAA4BC,QAAAA,SAAS,EAAE,GAAvC;AAA4CC,QAAAA,WAAW,EAAE;AAAzD,OAFf;AAGE,MAAA,mBAAmB,EAAE,KAAKd,mBAH5B;AAIE,MAAA,OAAO,EAAE;AACPe,QAAAA,KAAK,EAAE;AAAEC,UAAAA,cAAc,EAAE,KAAKC,mBAAvB;AAA4CC,UAAAA,GAAG,EAAE;AAAEC,YAAAA,OAAO,EAAE,IAAX;AAAiBC,YAAAA,SAAS,EAAE;AAA5B;AAAjD;AADA;AAJX;AAAA;AAAA;AAAA;AAAA,YADF;AAWD;;AA1CmD","sourcesContent":["import React, { Component } from 'react'\r\n// import PropTypes from 'prop-types'\r\nimport { Editor } from 'react-draft-wysiwyg'\r\nimport { ContentState, convertToRaw, EditorState } from 'draft-js'\r\nimport 'react-draft-wysiwyg/dist/react-draft-wysiwyg.css'\r\nimport draftToHtml from 'draftjs-to-html'\r\nimport htmlToDraft from 'html-to-draftjs'\r\n\r\n// 用来指定商品详情的富文本编程器组件\r\nexport default class RichTextEditor extends Component {\r\n\r\n  /* static propTypes = {\r\n    detail: PropTypes.string\r\n  } */\r\n  state = {\r\n    // 创建一个没有内容的编辑对象\r\n    editorState: EditorState.createEmpty()//构建一个初始化状态的编辑器+内容\r\n  }\r\n  // 输入过程中实时的回调\r\n  onEditorStateChange = (editorState) => {\r\n    this.setState({ editorState })\r\n  }\r\n  getRichText = () => {\r\n    const {editorState} = this.state\r\n    // 返回输入数据对应的html格式的文本\r\n    return draftToHtml(convertToRaw(editorState.getCurrentContent()))\r\n  }\r\n  setRichText = (html)=>{\r\n    const contentBlock = htmlToDraft(html);\r\n    if (contentBlock) {\r\n      const contentState = ContentState.createFromBlockArray(contentBlock.contentBlocks);\r\n      const editorState = EditorState.createWithContent(contentState);\r\n      this.setState({\r\n        editorState,\r\n      });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { editorState } = this.state\r\n    return (\r\n      <Editor\r\n        editorState={editorState}\r\n        editorStyle={{ border: '1px solid #ddd', minHeight: 200, paddingLeft: 10 }}\r\n        onEditorStateChange={this.onEditorStateChange}\r\n        toolbar={{\r\n          image: { uploadCallback: this.uploadImageCallback, alt: { present: true, mandatory: true } }\r\n        }}\r\n      />\r\n\r\n    )\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}