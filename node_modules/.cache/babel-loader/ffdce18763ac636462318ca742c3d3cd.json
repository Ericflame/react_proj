{"ast":null,"code":"import _classCallCheck from\"C:/Users/PC/Desktop/\\u6E90\\u7801/react_Project/react-project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/PC/Desktop/\\u6E90\\u7801/react_Project/react-project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/Users/PC/Desktop/\\u6E90\\u7801/react_Project/react-project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/PC/Desktop/\\u6E90\\u7801/react_Project/react-project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import\"antd/es/menu/style\";import _Menu from\"antd/es/menu\";var _dec,_class,_temp;import React,{Component}from'react';import{Link,withRouter}from'react-router-dom';import{connect}from'react-redux';import{createSaveTitleAction}from'../../../redux/actions_creators/menu_action';import menuList from'../../../config/menu_config';import logo from'./img/dora_19_2.png';import\"./css/left_nav.less\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var SubMenu=_Menu.SubMenu,Item=_Menu.Item;var LeftNav=(_dec=connect(function(state){return{menus:state.userInfo.user.role.menus,username:state.userInfo.user.username};},{saveTitle:createSaveTitleAction}),_dec(_class=withRouter(_class=(_temp=/*#__PURE__*/function(_Component){_inherits(LeftNav,_Component);var _super=_createSuper(LeftNav);function LeftNav(){var _this;_classCallCheck(this,LeftNav);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={collapsed:false};_this.toggleCollapsed=function(){_this.setState({collapsed:!_this.state.collapsed});};_this.hasAuth=function(item){//获取当前用户可以看到的菜单的数组\nvar _this$props=_this.props,menus=_this$props.menus,username=_this$props.username;// console.log(this.props.menus); //[ 'home','category','user','line']\n// console.log(item);//{title: \"首页\", key: \"home\", icon: \"home\", path: \"/admin/home\"}\nif(username==='admin')return true;else if(!item.children){return menus.find(function(item2){return item2===item.key;});}else if(item.children){return item.children.some(function(item3){return menus.indexOf(item3.key)!==-1;});}//校验菜单权限\n//eturn true\n};_this.createMenu=function(target){return target.map(function(item){if(_this.hasAuth(item)){if(!item.children){return/*#__PURE__*/_jsx(Item,{icon:item.icon,onClick:function onClick(){_this.props.saveTitle(item.title);},children:/*#__PURE__*/_jsx(Link,{to:item.key,children:/*#__PURE__*/_jsx(\"span\",{children:item.title})})},item.key);}else{return/*#__PURE__*/_jsx(SubMenu,{icon:item.icon,title:item.title,children:_this.createMenu(item.children)},item.key);}}});};return _this;}_createClass(LeftNav,[{key:\"componentDidMount\",value:function componentDidMount(){// console.log(this.props.location.pathname.split('/').splice(2));      \n}},{key:\"render\",value:function render(){var pathname=this.props.location.pathname;return/*#__PURE__*/_jsxs(\"div\",{className:\"aside-left\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"nav-header\",children:[/*#__PURE__*/_jsx(\"img\",{src:logo,alt:\"\"}),/*#__PURE__*/_jsx(\"h1\",{className:\"head\",children:\"\\u7BA1\\u7406\\u7CFB\\u7EDF\"})]}),/*#__PURE__*/_jsx(_Menu,{selectedKeys:pathname.indexOf('Product')!==-1?'Product':pathname.split('/').reverse()[0],defaultOpenKeys:pathname.split('/').splice(2),mode:\"inline\",theme:\"dark\"// inlineCollapsed={this.state.collapsed}\n,children:this.createMenu(menuList)})]});}}]);return LeftNav;}(Component),_temp))||_class)||_class);export default LeftNav;","map":{"version":3,"sources":["C:/Users/PC/Desktop/源码/react_Project/react-project/src/containers/Admin/left_nav/left_nav.jsx"],"names":["React","Component","Link","withRouter","connect","createSaveTitleAction","menuList","logo","SubMenu","Item","LeftNav","state","menus","userInfo","user","role","username","saveTitle","collapsed","toggleCollapsed","setState","hasAuth","item","props","children","find","item2","key","some","item3","indexOf","createMenu","target","map","icon","title","pathname","location","split","reverse","splice"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport { Menu } from 'antd';\r\nimport { Link, withRouter } from 'react-router-dom'\r\nimport { connect } from 'react-redux'\r\nimport { createSaveTitleAction } from '../../../redux/actions_creators/menu_action'\r\nimport menuList from '../../../config/menu_config'\r\nimport logo from './img/dora_19_2.png'\r\nimport \"./css/left_nav.less\"\r\nconst { SubMenu, Item } = Menu;\r\n\r\n@connect(\r\n    state => ({\r\n        menus: state.userInfo.user.role.menus,\r\n        username: state.userInfo.user.username\r\n    }),\r\n    {\r\n        saveTitle: createSaveTitleAction\r\n    }\r\n\r\n)\r\n@withRouter\r\nclass LeftNav extends Component {\r\n    state = {\r\n        collapsed: false,\r\n    };\r\n    componentDidMount() {\r\n        // console.log(this.props.location.pathname.split('/').splice(2));      \r\n    }\r\n    toggleCollapsed = () => {\r\n        this.setState({\r\n            collapsed: !this.state.collapsed,\r\n        });\r\n    }\r\n\r\n    hasAuth = (item) => {\r\n        //获取当前用户可以看到的菜单的数组\r\n        const { menus, username } = this.props\r\n        // console.log(this.props.menus); //[ 'home','category','user','line']\r\n        // console.log(item);//{title: \"首页\", key: \"home\", icon: \"home\", path: \"/admin/home\"}\r\n        if (username === 'admin') return true\r\n        else if (!item.children) {\r\n            return menus.find((item2) => { return item2 === item.key })\r\n        } else if (item.children) {\r\n            return item.children.some((item3) => { return menus.indexOf(item3.key) !== -1 })\r\n        }\r\n\r\n        //校验菜单权限\r\n        //eturn true\r\n    }\r\n    //用于创建菜单\r\n    createMenu = (target) => {\r\n        return target.map((item) => {\r\n            if (this.hasAuth(item)) {\r\n                if (!item.children) {\r\n                    return (\r\n                        <Item key={item.key} icon={item.icon} onClick={() => { this.props.saveTitle(item.title) }}>\r\n                            <Link to={item.key}>\r\n                                <span>{item.title}</span>\r\n                            </Link>\r\n                        </Item>\r\n                    )\r\n                } else {\r\n                    return (\r\n                        <SubMenu key={item.key} icon={item.icon} title={item.title}>\r\n                            {this.createMenu(item.children)}\r\n                        </SubMenu>\r\n                    )\r\n                }\r\n            }\r\n        })\r\n    }\r\n\r\n    render() {\r\n        const { pathname } = this.props.location\r\n        return (\r\n            <div className=\"aside-left\">\r\n                {/* <Button type=\"primary\" onClick={this.toggleCollapsed} style={{ marginBottom: 16 }}>\r\n                    {React.createElement(this.state.collapsed ? MenuUnfoldOutlined : MenuFoldOutlined)}\r\n                </Button> */}\r\n                <header className=\"nav-header\">\r\n                    <img src={logo} alt=\"\" />\r\n                    <h1 className=\"head\">管理系统</h1>\r\n                </header>\r\n                <Menu\r\n                    selectedKeys={pathname.indexOf('Product') !== -1 ? 'Product' : pathname.split('/').reverse()[0]}\r\n                    defaultOpenKeys={pathname.split('/').splice(2)}\r\n                    mode=\"inline\"\r\n                    theme=\"dark\"\r\n                // inlineCollapsed={this.state.collapsed}\r\n                >\r\n                    {\r\n                        this.createMenu(menuList)\r\n                    }\r\n                </Menu>\r\n            </div>\r\n        )\r\n    }\r\n}\r\nexport default LeftNav"]},"metadata":{},"sourceType":"module"}