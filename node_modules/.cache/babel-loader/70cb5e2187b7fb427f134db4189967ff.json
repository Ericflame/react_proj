{"ast":null,"code":"import _classCallCheck from\"C:/Users/PC/Desktop/\\u6E90\\u7801/react_Project/react-project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/PC/Desktop/\\u6E90\\u7801/react_Project/react-project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/Users/PC/Desktop/\\u6E90\\u7801/react_Project/react-project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/PC/Desktop/\\u6E90\\u7801/react_Project/react-project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';// import PropTypes from 'prop-types'\nimport{Editor}from'react-draft-wysiwyg';import{ContentState,convertToRaw,EditorState}from'draft-js';import'react-draft-wysiwyg/dist/react-draft-wysiwyg.css';import draftToHtml from'draftjs-to-html';import htmlToDraft from'html-to-draftjs';// 用来指定商品详情的富文本编程器组件\nimport{jsx as _jsx}from\"react/jsx-runtime\";var RichTextEditor=/*#__PURE__*/function(_Component){_inherits(RichTextEditor,_Component);var _super=_createSuper(RichTextEditor);function RichTextEditor(){var _this;_classCallCheck(this,RichTextEditor);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={// 创建一个没有内容的编辑对象\neditorState:EditorState.createEmpty()//构建一个初始化状态的编辑器+内容\n};_this.onEditorStateChange=function(editorState){_this.setState({editorState:editorState});};_this.getRichText=function(){var editorState=_this.state.editorState;// 返回输入数据对应的html格式的文本\nreturn draftToHtml(convertToRaw(editorState.getCurrentContent()));};_this.setRichText=function(html){var contentBlock=htmlToDraft(html);if(contentBlock){var contentState=ContentState.createFromBlockArray(contentBlock.contentBlocks);var editorState=EditorState.createWithContent(contentState);_this.setState({editorState:editorState});}};return _this;}_createClass(RichTextEditor,[{key:\"render\",value:function render(){var editorState=this.state.editorState;return/*#__PURE__*/_jsx(Editor,{editorState:editorState,editorStyle:{border:'1px solid #ddd',minHeight:200,paddingLeft:10},onEditorStateChange:this.onEditorStateChange,toolbar:{image:{uploadCallback:this.uploadImageCallback,alt:{present:true,mandatory:true}}}});}}]);return RichTextEditor;}(Component);export{RichTextEditor as default};","map":{"version":3,"sources":["C:/Users/PC/Desktop/源码/react_Project/react-project/src/containers/Product/rich-text-editor.jsx"],"names":["React","Component","Editor","ContentState","convertToRaw","EditorState","draftToHtml","htmlToDraft","RichTextEditor","state","editorState","createEmpty","onEditorStateChange","setState","getRichText","getCurrentContent","setRichText","html","contentBlock","contentState","createFromBlockArray","contentBlocks","createWithContent","border","minHeight","paddingLeft","image","uploadCallback","uploadImageCallback","alt","present","mandatory"],"mappings":"4rBAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA;AACA,OAASC,MAAT,KAAuB,qBAAvB,CACA,OAASC,YAAT,CAAuBC,YAAvB,CAAqCC,WAArC,KAAwD,UAAxD,CACA,MAAO,kDAAP,CACA,MAAOC,CAAAA,WAAP,KAAwB,iBAAxB,CACA,MAAOC,CAAAA,WAAP,KAAwB,iBAAxB,CAEA;8CACqBC,CAAAA,c,2VAKnBC,K,CAAQ,CACN;AACAC,WAAW,CAAEL,WAAW,CAACM,WAAZ,EAAyB;AAFhC,C,OAKRC,mB,CAAsB,SAACF,WAAD,CAAiB,CACrC,MAAKG,QAAL,CAAc,CAAEH,WAAW,CAAXA,WAAF,CAAd,EACD,C,OACDI,W,CAAc,UAAM,IACXJ,CAAAA,WADW,CACI,MAAKD,KADT,CACXC,WADW,CAElB;AACA,MAAOJ,CAAAA,WAAW,CAACF,YAAY,CAACM,WAAW,CAACK,iBAAZ,EAAD,CAAb,CAAlB,CACD,C,OACDC,W,CAAc,SAACC,IAAD,CAAQ,CACpB,GAAMC,CAAAA,YAAY,CAAGX,WAAW,CAACU,IAAD,CAAhC,CACA,GAAIC,YAAJ,CAAkB,CAChB,GAAMC,CAAAA,YAAY,CAAGhB,YAAY,CAACiB,oBAAb,CAAkCF,YAAY,CAACG,aAA/C,CAArB,CACA,GAAMX,CAAAA,WAAW,CAAGL,WAAW,CAACiB,iBAAZ,CAA8BH,YAA9B,CAApB,CACA,MAAKN,QAAL,CAAc,CACZH,WAAW,CAAXA,WADY,CAAd,EAGD,CACF,C,gEAED,iBAAS,IACCA,CAAAA,WADD,CACiB,KAAKD,KADtB,CACCC,WADD,CAEP,mBACE,KAAC,MAAD,EACE,WAAW,CAAEA,WADf,CAEE,WAAW,CAAE,CAAEa,MAAM,CAAE,gBAAV,CAA4BC,SAAS,CAAE,GAAvC,CAA4CC,WAAW,CAAE,EAAzD,CAFf,CAGE,mBAAmB,CAAE,KAAKb,mBAH5B,CAIE,OAAO,CAAE,CACPc,KAAK,CAAE,CAAEC,cAAc,CAAE,KAAKC,mBAAvB,CAA4CC,GAAG,CAAE,CAAEC,OAAO,CAAE,IAAX,CAAiBC,SAAS,CAAE,IAA5B,CAAjD,CADA,CAJX,EADF,CAWD,C,4BA1CyC9B,S,SAAvBO,c","sourcesContent":["import React, { Component } from 'react'\r\n// import PropTypes from 'prop-types'\r\nimport { Editor } from 'react-draft-wysiwyg'\r\nimport { ContentState, convertToRaw, EditorState } from 'draft-js'\r\nimport 'react-draft-wysiwyg/dist/react-draft-wysiwyg.css'\r\nimport draftToHtml from 'draftjs-to-html'\r\nimport htmlToDraft from 'html-to-draftjs'\r\n\r\n// 用来指定商品详情的富文本编程器组件\r\nexport default class RichTextEditor extends Component {\r\n\r\n  /* static propTypes = {\r\n    detail: PropTypes.string\r\n  } */\r\n  state = {\r\n    // 创建一个没有内容的编辑对象\r\n    editorState: EditorState.createEmpty()//构建一个初始化状态的编辑器+内容\r\n  }\r\n  // 输入过程中实时的回调\r\n  onEditorStateChange = (editorState) => {\r\n    this.setState({ editorState })\r\n  }\r\n  getRichText = () => {\r\n    const {editorState} = this.state\r\n    // 返回输入数据对应的html格式的文本\r\n    return draftToHtml(convertToRaw(editorState.getCurrentContent()))\r\n  }\r\n  setRichText = (html)=>{\r\n    const contentBlock = htmlToDraft(html);\r\n    if (contentBlock) {\r\n      const contentState = ContentState.createFromBlockArray(contentBlock.contentBlocks);\r\n      const editorState = EditorState.createWithContent(contentState);\r\n      this.setState({\r\n        editorState,\r\n      });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { editorState } = this.state\r\n    return (\r\n      <Editor\r\n        editorState={editorState}\r\n        editorStyle={{ border: '1px solid #ddd', minHeight: 200, paddingLeft: 10 }}\r\n        onEditorStateChange={this.onEditorStateChange}\r\n        toolbar={{\r\n          image: { uploadCallback: this.uploadImageCallback, alt: { present: true, mandatory: true } }\r\n        }}\r\n      />\r\n\r\n    )\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}